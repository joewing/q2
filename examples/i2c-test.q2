
.include examples/zeropage.q2

  .org  0x800

  lea   =100
loop:
  add   =neg1
  sta   =x9

  lea   $+3
  jmp   @$+1
  .dw   i2c_start

  lea   =1
  sta   =x0
  lea   $+3
  jmp   @$+1
  .dw   i2c_write

  lea   =2
  sta   =x0
  lea   $+3
  jmp   @$+1
  .dw   i2c_write

  lda   =x9
  sta   =x0
  lea   $+3
  jmp   @$+1
  .dw   i2c_write

  lea   $+3
  jmp   @$+1
  .dw   i2c_read

  lea   $+3
  jmp   @$+1
  .dw   i2c_stop

  lda   =x9
  jfc   loop

  jmp   $

.include examples/i2c.q2
